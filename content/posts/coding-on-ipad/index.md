---
title: "아이패드로 개발하기"
summary: "군대에서 개발하는 방법은 많지 않습니다. 오늘은 제가 어떻게 아이패드로 개발을 할 수 있었는지 몇가지 방법을 공유해보고자 합니다."
date: "2023-06-10T00:00:00Z"
tags: ["code-server", "개발 세팅"]
---

## 시작
글을 쓰고 있는 시점 저는 공군에서 현역으로 복무하고 있습니다. 군대에서 개발하는 방법은 많지 않습니다. 싸지방에서 하거나 공군 같은 경우에는 태블릿을 사용할 수 있습니다.
싸지방 PC에 Visual Studio Code나 Node.js 등 개인적으로 프로그램을 설치하여 사용하는 것은 금지되어 있습니다. 
마찬가지로 일반적인 방법으로는 태블릿에 앞서 말한 개발에 필요한 프로그램들을 설치하기는 불가능합니다. 그래도 방법은 있습니다.
저는 아이패드를 사용하고 있습니다. 오늘은 제가 어떻게 아이패드로 개발을 할 수 있었는지 몇가지 방법을 공유해보고자 합니다.

## iSH
개발을 하려면 우선 터미널에 접근해 쉘 명령어들을 입력할 수 있어야겠습니다. 하지만 아이패드에서는 쉘에 접근할 수 있는 방법이 없습니다.
검색을 조금 해보니 iSH라는 앱을 발견할 수 있었습니다. iOS와 아이패드에서 알파인 리눅스 쉘을 샌드박스로 띄워 사용할 수 있게 만들어 놓은 앱 입니다. 
저는 웹 개발자이기 때문에 바로 Node.js를 설치해보았습니다. `apt install node` 명령어를 실행하여 쉽게 설치할 수 있었지만 node 14가 설치됩니다. Next.js나
다른 node 기반의 프레임워크를 돌리려면 최소 node 20는 되어야 합니다. `/etc/apk/repositories` 이 경로에서 패키지 매니저가 가르키고 있는 레지스트리 값을 적절하게
수정해줍시다. 저는 알파인 리눅스 공식 레지스트리 값으로 변경하여 node 20 버전 설치에 성공하였습니다.
자 이제 기대되는 마음으로 Next.js 프로젝트를 설치하기 위해 `npm create-next-app@latest` 명령어를 실행해 보았는데 몇십분을 기다려도 설치가 끝나지 않았습니다.
그렇습니다. 샌드박스 형식의 리눅스의 한계였던 것 입니다. 계속 더 기다려서 설치를 끝낸다고 해도 이렇게 느린 환경에서 개발을 이어갈 수는 없을 것 같아서 다른 방법을
알아보기로 했습니다.

## 클라우드 컴퓨팅
아이패드에서 GCP나 AWS의 VM Instance에 SSH로 접속해서 원격으로 개발하는 방법으로 방향을 틀었습니다. AWS에서는 Lightsail을 첫 몇달간 무료로 제공하고
GCP에서도 3달정도 사용할 수 있는 300달러 크레딧을 첫 가입시에 제공하고 있습니다. AWS의 Lightsail 과 GCP의 Compute Engine - VM Instance를 둘다 사용해본 결과
첫 몇달간 무료로 사용하기에는 GCP가 훨씬 좋았습니다. 그 이유는 AWS에서는 저사양의 VM만 무료로 제공한 반면, GCP에서는 그냥 크래딧으로 줘버리기 때문에 고사양의 VM도
돌릴 수 있었습니다. 아무튼 둘중 한 곳을 선택하여 Lightsail/EC2 던 VM Instance던 띄우면 아이패드에서 SSH 클라이언트 앱으로 접속이 가능합니다.
앱스토어에는 SSH 클라이언트 앱이 많습니다. 여러가지를 사용해본 결과 Termius가 무료이며 가장 사용 경험이 좋았습니다. 
자 이렇게 클라우드에 VM도 띄웠고 아이패드로 SSH 접속도 했는데, 코드 작성은 어떻게 할까요? Vim을 사용하면 됩니다. 저는 군대와서 Vim을 배워 평소에도 VS Code에 Vim Extension을
설치하여 사용하고 있는 사람이라 Vim 사용에는 전혀 문제가 없었습니다. 또한 Neovim을 사용하여 여러 플러그인과 같이 설치해서 사용해주면 VS Code와 매우 유사한 개발 환경을 구축할 수 있습니다.
Neovim으로 개발 환경을 구축한 이야기는 나중에 한번 더 다뤄보도록 하겠습니다.
다만, 이 방식의 불편한 점이 있습니다. 바로 Latency인데요. 아무리 한국 리전에 인스턴스를 띄워서 사용한다고 하지만 타이밍 경험에 있어서 이 수 ms의 딜레이는 정말 불편했습니다.
참고 사용하면 할만한 정도이긴 합니다. 하지만 저는 이 latency 때문에 아래 방법으로 정착을 했습니다.

## code-server
code-server는 VS Code를 웹에서 사용할 수 있게 만들어 놓은 프로젝트 입니다. 웹으로 VS Code를 사용할 수 있는 방법은 code-server 말고도 여러가지 방법이 있습니다.
- [vscode.dev](https://vscode.dev)
- Github Codespaces
정도가 있습니다. vscode.dev 같은 경우에는 별도의 셋업과정 없이 바로 링크치고 들어가보면 vscode와 똑같은 화면을 볼 수 있는데 아이패드에서는 웹에서 내부 파일 접근이 불가능 하고
쉘도 접근할 수 없어 단순히 메모장 정도의 기능 밖에 못하는 빛 좋은 개살구 입니다. Github Codespaces 같은 경우는 마찬가지로 클릭 한번으로 자동으로 Azure에 Instance가 띄워지고
웹 버전 VS Code이 열려 원격으로 개발할 수 있게 해줍니다. SSH로 연결한 Vim에서 타이핑하는거에 비해서는 타이핑 경험이 훨씬 좋습니다. 다만 매번 Codespace에 접속할 때마다 인스턴스가 콜드 스타트가 돼서
첫 실행이 느려 답답했습니다. 그래서 저는 제가 대여하고 있는 클라우드 인스턴스에 항상 떠 있게 하는 code-server를 선택했습니다. 앞단에 nginx를 두어서 https 인증서 서빙도 할 수 있게 하였습니다.
이 정도면 굉장히 쓸만하다고 생각하지만 그래도 몇가지 불편한 점은 있습니다. 아이패드에서 cmd-w 커맨드가 안먹어 창 닫기가 불편한점, 저는 그래서 ctrl-w-q로 재매핑하여 사용하고 있긴합니다.
또 다른 불편한점으로는 사파리의 텍스트 커서와 VS Code의 텍스트 커서가 동시에 렌더링돼서 두 개가 서로 오버랩 된다는 점 입니다. 개인적으로 굉장히 거슬려서 microsoft/vscode github에
[Issue](https://github.com/microsoft/vscode/issues/244087)도 올리고 제가 나름대로 고쳐서 [PR](https://github.com/microsoft/vscode/pull/244091)도 올렸는데 아직 관심을 못 받았습니다.
기타 등등 실제로 개발을 하다보면 불편한 점이 나오는데 pr 올린다고 해서 바로 merge되는 것도 아니고 merge 돼도 다음 release 까지는 시간이 오래 걸리기 떄문에 저는 code-server 와 vs code 둘다
fork 따서 불편한 점을 패치해서 사용하고 있습니다. 

